# ============================================
# Environment Configuration
# ============================================
# Deployment environment: development, staging, or production
ENVIRONMENT=development

# Debug mode - CRITICAL: MUST be false in production to prevent PHI exposure
# Enabling debug mode exposes Protected Health Information (PHI) in error messages
DEBUG=false

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgresql://user:password@host:5432/therapybridge

# Database Connection Pool Settings (optional, sensible defaults provided)
DB_POOL_SIZE=10              # Number of connections to maintain in pool
DB_MAX_OVERFLOW=20           # Additional connections when pool is full
DB_POOL_TIMEOUT=30           # Seconds to wait for available connection

# SQL Query Logging - CRITICAL: MUST be false in production (exposes PHI)
SQL_ECHO=false

# ============================================
# OpenAI API Configuration
# ============================================
OPENAI_API_KEY=sk-your-key-here

# OpenAI Model Settings (optional, defaults provided)
OPENAI_MODEL=gpt-4o                  # Model for note extraction
OPENAI_TIMEOUT=120                   # API timeout in seconds
OPENAI_MAX_RETRIES=3                 # Number of retry attempts
OPENAI_TEMPERATURE=0.3               # Temperature (0.0-2.0, lower = more consistent)

# ============================================
# JWT Authentication Configuration
# ============================================

# JWT Secret Key (CRITICAL: Change this in production!)
# Generate a secure key with: openssl rand -hex 32
# Changing this key invalidates all existing tokens
JWT_SECRET_KEY=your-secret-key-here-change-in-production

# JWT Settings (optional, defaults provided)
JWT_ALGORITHM=HS256                  # Signing algorithm
ACCESS_TOKEN_EXPIRE_MINUTES=30       # Access token lifetime
REFRESH_TOKEN_EXPIRE_DAYS=7          # Refresh token lifetime

# ============================================
# CORS Configuration
# ============================================

# Allowed frontend origins (comma-separated list)
# Default: http://localhost:3000,http://localhost:5173
# Production: Set to your actual frontend URL(s)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Allow credentials in CORS requests (default: true)
CORS_CREDENTIALS=true

# ============================================
# File Upload Configuration
# ============================================

# Upload directory for audio files (default: uploads/audio)
UPLOAD_DIR=uploads/audio

# Maximum upload size in megabytes (default: 100)
MAX_UPLOAD_SIZE_MB=100

# Allowed audio formats (comma-separated, default: mp3,wav,m4a,ogg,flac)
ALLOWED_AUDIO_FORMATS=mp3,wav,m4a,ogg,flac

# ============================================
# Rate Limiting Configuration
# ============================================

# Enable rate limiting (default: true)
RATE_LIMIT_ENABLED=true

# Rate limits by endpoint (format: count/period)
RATE_LIMIT_LOGIN=5/minute        # Login attempts
RATE_LIMIT_SIGNUP=3/hour         # Signup attempts
RATE_LIMIT_REFRESH=10/minute     # Token refresh attempts
RATE_LIMIT_API=100/minute        # General API calls

# ============================================
# Server Configuration
# ============================================

# Server host and port (optional, defaults provided)
HOST=0.0.0.0
PORT=8000
WORKERS=1

# ============================================
# Logging Configuration
# ============================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
LOG_LEVEL=INFO

# Log format (default provided in config.py)
# LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ============================================
# Cleanup Configuration
# ============================================

# Retention period for failed sessions (days, default: 7)
# Audio files from sessions with status='failed' older than this will be cleaned up
FAILED_SESSION_RETENTION_DAYS=7

# Retention period for orphaned files (hours, default: 24)
# Files not referenced in database and older than this will be cleaned up
ORPHANED_FILE_RETENTION_HOURS=24

# Enable automatic cleanup on startup (default: false)
# When true, runs cleanup automatically when the API starts
AUTO_CLEANUP_ON_STARTUP=false

# Scheduled cleanup hour (0-23, default: 3)
# Reserved for future scheduled cleanup feature (currently not implemented)
CLEANUP_SCHEDULE_HOUR=3
